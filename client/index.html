<!DOCTYPE html>
<html>
    <head>
      <title>终极一班</title>
      <meta charset="utf-8">
      <link href="css/style.css" media="screen" rel="stylesheet" type="text/css" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
      <meta name="apple-mobile-web-app-capable" content="yes" />
      <meta name="format-detection" content="telephone=no" />
    </head>
    <body>
      <section id="login" class="hide">
          <div style="text-align:center;"><img src="img/logo.png" width="128" height="128" /></div>
          <form action="" method="post">
          <div class="line"><input type="text" name="name" placeholder="邮箱或者用户名" /></div>
          <div class="line"><input type="password" name="password" placeholder="密码" /></div>
          <div class="line line-btn"><input type="submit" name="submitted" class="btn" value="登陆" /></div>
          </form>
          <footer class="footer"><div>还没有账号？<a href="#register" class="redirect">现在注册！</a></div></footer>
      </section>
      
      
      <section id="register" class="hide">
          <div style="text-align:center;"><img src="img/logo.png" /></div>
          <form action="/server/authorize/register" method="post">
          <div class="line"><input type="text" name="name" placeholder="用户名" /></div>
          <div class="line"><input type="email" name="email" placeholder="邮箱地址" /></div>
          <div class="line"><input type="password" name="password" placeholder="密码" /></div>
          <div class="line line-btn"><input type="submit" name="submitted" class="btn" value="立即注册" /></div>
          </form>
          <footer class="footer"><div>已有账号？<a href="#login" class="redirect">返回登录</a></div></footer>
      </section>
      
      
      <script src="js/zepto.js"></script>
      <script src="js/event.js"></script>
      <script src="js/form.js"></script>
      <script src="js/ajax.js"></script>
      <script src="js/touch.js"></script>
      <script src="js/script.js"></script>
      <script>
      $(document).ready(function(){
    	  site.init('#login');
    	  $("#login form").submit(function(e){
    		  e.preventDefault();
    		  var name = $(this).find("input[name='name']").val();
    		  var password = $(this).find("input[name='password']").val();
    		  if(name && password){
    			  $(this).find("input[type=submit]").val("正在登录中...").attr('disabled','disabled');
    			  if(site.sign(name,password)){
    				  site.go();
    				  return true;
    			  }
    		  }
    	  });
    	  
    	  $("#register form").submit(function(e){
    		  e.preventDefault();
    		  var name = $(this).find("input[name='name']").val();
    		  var email = $(this).find("input[name='email']").val();
    		  var password = $(this).find("input[name='password']").val();
    		  if(name && email && password){
    			  $(this).find("input[type=submit]").val("正在注册...").attr('disabled','disabled');
    			  if(site.sign(name,password,email)){
    				  site.go();
    				  return true;
    			  }
    		  }
    	  });
    	  $("a.redirect").live(activate, function(event){
    			site.redirect($(this).attr("href"));
    			return false;
    	  });
      });
      </script>
    </body>
</html>
